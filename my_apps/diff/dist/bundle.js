(()=>{"use strict";function e(){}function n(e,n,t,o,r){for(var u,a=[];n;)a.push(n),u=n.previousComponent,delete n.previousComponent,n=u;a.reverse();for(var l=0,i=a.length,s=0,c=0;l<i;l++){var v=a[l];if(v.removed)v.value=e.join(o.slice(c,c+v.count)),c+=v.count;else{if(!v.added&&r){var f=t.slice(s,s+v.count);f=f.map((function(e,n){var t=o[c+n];return t.length>e.length?t:e})),v.value=e.join(f)}else v.value=e.join(t.slice(s,s+v.count));s+=v.count,v.added||(c+=v.count)}}return a}function t(e,n){var t;for(t=0;t<e.length&&t<n.length;t++)if(e[t]!=n[t])return e.slice(0,t);return e.slice(0,t)}function o(e,n){var t;if(!e||!n||e[e.length-1]!=n[n.length-1])return"";for(t=0;t<e.length&&t<n.length;t++)if(e[e.length-(t+1)]!=n[n.length-(t+1)])return e.slice(-t);return e.slice(-t)}function r(e,n,t){if(e.slice(0,n.length)!=n)throw Error("string ".concat(JSON.stringify(e)," doesn't start with prefix ").concat(JSON.stringify(n),"; this is a bug"));return t+e.slice(n.length)}function u(e,n,t){if(!n)return e+t;if(e.slice(-n.length)!=n)throw Error("string ".concat(JSON.stringify(e)," doesn't end with suffix ").concat(JSON.stringify(n),"; this is a bug"));return e.slice(0,-n.length)+t}function a(e,n){return r(e,n,"")}function l(e,n){return u(e,n,"")}function i(e,n){return n.slice(0,function(e,n){var t=0;e.length>n.length&&(t=e.length-n.length);var o=n.length;e.length<n.length&&(o=e.length);var r=Array(o),u=0;r[0]=0;for(var a=1;a<o;a++){for(n[a]==n[u]?r[a]=r[u]:r[a]=u;u>0&&n[a]!=n[u];)u=r[u];n[a]==n[u]&&u++}u=0;for(var l=t;l<e.length;l++){for(;u>0&&e[l]!=n[u];)u=r[u];e[l]==n[u]&&u++}return u}(e,n))}e.prototype={diff:function(e,t){var o,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=r.callback;"function"==typeof r&&(u=r,r={});var a=this;function l(e){return e=a.postProcess(e,r),u?(setTimeout((function(){u(e)}),0),!0):e}e=this.castInput(e,r),t=this.castInput(t,r),e=this.removeEmpty(this.tokenize(e,r));var i=(t=this.removeEmpty(this.tokenize(t,r))).length,s=e.length,c=1,v=i+s;null!=r.maxEditLength&&(v=Math.min(v,r.maxEditLength));var f=null!==(o=r.timeout)&&void 0!==o?o:1/0,p=Date.now()+f,h=[{oldPos:-1,lastComponent:void 0}],d=this.extractCommon(h[0],t,e,0,r);if(h[0].oldPos+1>=s&&d+1>=i)return l(n(a,h[0].lastComponent,t,e,a.useLongestToken));var m=-1/0,g=1/0;function y(){for(var o=Math.max(m,-c);o<=Math.min(g,c);o+=2){var u=void 0,v=h[o-1],f=h[o+1];v&&(h[o-1]=void 0);var p=!1;if(f){var y=f.oldPos-o;p=f&&0<=y&&y<i}var C=v&&v.oldPos+1<s;if(p||C){if(u=!C||p&&v.oldPos<f.oldPos?a.addToPath(f,!0,!1,0,r):a.addToPath(v,!1,!0,1,r),d=a.extractCommon(u,t,e,o,r),u.oldPos+1>=s&&d+1>=i)return l(n(a,u.lastComponent,t,e,a.useLongestToken));h[o]=u,u.oldPos+1>=s&&(g=Math.min(g,o-1)),d+1>=i&&(m=Math.max(m,o+1))}else h[o]=void 0}c++}if(u)!function e(){setTimeout((function(){if(c>v||Date.now()>p)return u();y()||e()}),0)}();else for(;c<=v&&Date.now()<=p;){var C=y();if(C)return C}},addToPath:function(e,n,t,o,r){var u=e.lastComponent;return u&&!r.oneChangePerToken&&u.added===n&&u.removed===t?{oldPos:e.oldPos+o,lastComponent:{count:u.count+1,added:n,removed:t,previousComponent:u.previousComponent}}:{oldPos:e.oldPos+o,lastComponent:{count:1,added:n,removed:t,previousComponent:u}}},extractCommon:function(e,n,t,o,r){for(var u=n.length,a=t.length,l=e.oldPos,i=l-o,s=0;i+1<u&&l+1<a&&this.equals(t[l+1],n[i+1],r);)i++,l++,s++,r.oneChangePerToken&&(e.lastComponent={count:1,previousComponent:e.lastComponent,added:!1,removed:!1});return s&&!r.oneChangePerToken&&(e.lastComponent={count:s,previousComponent:e.lastComponent,added:!1,removed:!1}),e.oldPos=l,i},equals:function(e,n,t){return t.comparator?t.comparator(e,n):e===n||t.ignoreCase&&e.toLowerCase()===n.toLowerCase()},removeEmpty:function(e){for(var n=[],t=0;t<e.length;t++)e[t]&&n.push(e[t]);return n},castInput:function(e){return e},tokenize:function(e){return Array.from(e)},join:function(e){return e.join("")},postProcess:function(e){return e}},new e;var s="a-zA-Z0-9_\\u{C0}-\\u{FF}\\u{D8}-\\u{F6}\\u{F8}-\\u{2C6}\\u{2C8}-\\u{2D7}\\u{2DE}-\\u{2FF}\\u{1E00}-\\u{1EFF}",c=new RegExp("[".concat(s,"]+|\\s+|[^").concat(s,"]"),"ug"),v=new e;function f(e,n,s,c){if(n&&s){var v=n.value.match(/^\s*/)[0],f=n.value.match(/\s*$/)[0],p=s.value.match(/^\s*/)[0],h=s.value.match(/\s*$/)[0];if(e){var d=t(v,p);e.value=u(e.value,p,d),n.value=a(n.value,d),s.value=a(s.value,d)}if(c){var m=o(f,h);c.value=r(c.value,h,m),n.value=l(n.value,m),s.value=l(s.value,m)}}else if(s)e&&(s.value=s.value.replace(/^\s*/,"")),c&&(c.value=c.value.replace(/^\s*/,""));else if(e&&c){var g=c.value.match(/^\s*/)[0],y=n.value.match(/^\s*/)[0],C=n.value.match(/\s*$/)[0],w=t(g,y);n.value=a(n.value,w);var P=o(a(g,w),C);n.value=l(n.value,P),c.value=r(c.value,g,P),e.value=u(e.value,g,g.slice(0,g.length-P.length))}else if(c){var k=c.value.match(/^\s*/)[0],E=i(n.value.match(/\s*$/)[0],k);n.value=l(n.value,E)}else if(e){var T=i(e.value.match(/\s*$/)[0],n.value.match(/^\s*/)[0]);n.value=a(n.value,T)}}v.equals=function(e,n,t){return t.ignoreCase&&(e=e.toLowerCase(),n=n.toLowerCase()),e.trim()===n.trim()},v.tokenize=function(e){var n,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.intlSegmenter){if("word"!=t.intlSegmenter.resolvedOptions().granularity)throw new Error('The segmenter passed must have a granularity of "word"');n=Array.from(t.intlSegmenter.segment(e),(function(e){return e.segment}))}else n=e.match(c)||[];var o=[],r=null;return n.forEach((function(e){/\s/.test(e)?null==r?o.push(e):o.push(o.pop()+e):/\s/.test(r)?o[o.length-1]==r?o.push(o.pop()+e):o.push(r+e):o.push(e),r=e})),o},v.join=function(e){return e.map((function(e,n){return 0==n?e:e.replace(/^\s+/,"")})).join("")},v.postProcess=function(e,n){if(!e||n.oneChangePerToken)return e;var t=null,o=null,r=null;return e.forEach((function(e){e.added?o=e:e.removed?r=e:((o||r)&&f(t,r,o,e),t=e,o=null,r=null)})),(o||r)&&f(t,r,o,null),e},(new e).tokenize=function(e){var n=new RegExp("(\\r?\\n)|[".concat(s,"]+|[^\\S\\n\\r]+|[^").concat(s,"]"),"ug");return e.match(n)||[]};var p=new e;function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}p.tokenize=function(e,n){n.stripTrailingCr&&(e=e.replace(/\r\n/g,"\n"));var t=[],o=e.split(/(\n|\r\n)/);o[o.length-1]||o.pop();for(var r=0;r<o.length;r++){var u=o[r];r%2&&!n.newlineIsToken?t[t.length-1]+=u:t.push(u)}return t},p.equals=function(n,t,o){return o.ignoreWhitespace?(o.newlineIsToken&&n.includes("\n")||(n=n.trim()),o.newlineIsToken&&t.includes("\n")||(t=t.trim())):o.ignoreNewlineAtEof&&!o.newlineIsToken&&(n.endsWith("\n")&&(n=n.slice(0,-1)),t.endsWith("\n")&&(t=t.slice(0,-1))),e.prototype.equals.call(this,n,t,o)},(new e).tokenize=function(e){return e.split(/(\S.+?[.!?])(?=\s+|$)/)},(new e).tokenize=function(e){return e.split(/([{}:;,]|\s+)/)};var d=new e;function m(e,n,t,o,r){var u,a;for(n=n||[],t=t||[],o&&(e=o(r,e)),u=0;u<n.length;u+=1)if(n[u]===e)return t[u];if("[object Array]"===Object.prototype.toString.call(e)){for(n.push(e),a=new Array(e.length),t.push(a),u=0;u<e.length;u+=1)a[u]=m(e[u],n,t,o,r);return n.pop(),t.pop(),a}if(e&&e.toJSON&&(e=e.toJSON()),"object"===h(e)&&null!==e){n.push(e),a={},t.push(a);var l,i=[];for(l in e)Object.prototype.hasOwnProperty.call(e,l)&&i.push(l);for(i.sort(),u=0;u<i.length;u+=1)a[l=i[u]]=m(e[l],n,t,o,l);n.pop(),t.pop()}else a=e;return a}d.useLongestToken=!0,d.tokenize=p.tokenize,d.castInput=function(e,n){var t=n.undefinedReplacement,o=n.stringifyReplacer,r=void 0===o?function(e,n){return void 0===n?t:n}:o;return"string"==typeof e?e:JSON.stringify(m(e,null,null,r),r,"  ")},d.equals=function(n,t,o){return e.prototype.equals.call(d,n.replace(/,([\r\n])/g,"$1"),t.replace(/,([\r\n])/g,"$1"),o)};var g=new e;g.tokenize=function(e){return e.slice()},g.join=g.removeEmpty=function(e){return e},document.getElementById("compareBtn").addEventListener("click",(()=>{const e=function(e,n){const t=(o=e,r=n,p.diff(o,r,u));var o,r,u;let a="";return t.forEach((e=>{const n=function(e){const n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return e.replace(/[&<>"']/g,(function(e){return n[e]}))}(e.value);e.added?a+=`<div class="added">+ ${n.replace(/\n/g,"<br>")}</div>`:e.removed?a+=`<div class="removed">- ${n.replace(/\n/g,"<br>")}</div>`:a+=`<div>  ${n.replace(/\n/g,"<br>")}</div>`})),a}(document.getElementById("oldText").value,document.getElementById("newText").value);document.getElementById("diffOutput").innerHTML=e}))})();