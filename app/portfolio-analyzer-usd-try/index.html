<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Portfolio Analyzer USD/TRY</title>
<style>
  :root {
    --bg-primary: #f9fafb;
    --bg-secondary: #fff;
    --text-primary: #111;
    --text-muted: #6b7280;
    --border-color: #ccc;
    --btn-bg: #2563eb;
    --btn-hover: #1e40af;
    --shadow: rgba(0,0,0,0.1);
  }

  body.dark-mode {
    --bg-primary: #1f2937;
    --bg-secondary: #374151;
    --text-primary: #f3f4f6;
    --text-muted: #9ca3af;
    --border-color: #4b5563;
    --btn-bg: #3b82f6;
    --btn-hover: #2563eb;
    --shadow: rgba(0,0,0,0.3);
  }

  body {
    font-family: Arial, sans-serif;
    background: var(--bg-primary);
    color: var(--text-primary);
    padding: 20px;
    max-width: 600px;
    margin: auto;
    transition: background 0.3s, color 0.3s;
    position: relative;
  }

  h2 {
    text-align: center;
    margin-bottom: 20px;
  }

  .theme-toggle {
    background: var(--btn-bg);
    border: none;
    color: white;
    padding: 5px 8px;
    border-radius: 5px;
    cursor: pointer;
    font-size: 12px;
    transition: background 0.3s;
    position: fixed;
    top: 15px;
    right: 15px;
    z-index: 1000;
    width: auto;
  }

  .theme-toggle:hover {
    background: var(--btn-hover);
  }

  label {
    display: block;
    margin-top: 10px;
  }

  input {
    width: 100%;
    padding: 8px;
    margin-top: 5px;
    border-radius: 8px;
    border: 1px solid var(--border-color);
    background: var(--bg-secondary);
    color: var(--text-primary);
    box-sizing: border-box;
    transition: background 0.3s, color 0.3s, border-color 0.3s;
  }

  input:focus {
    outline: none;
    border-color: var(--btn-bg);
    box-shadow: 0 0 5px var(--btn-bg);
  }

  button {
    margin-top: 15px;
    padding: 10px;
    border: none;
    border-radius: 8px;
    background: var(--btn-bg);
    color: white;
    cursor: pointer;
    width: 100%;
    font-size: 15px;
    transition: background 0.3s;
  }

  button:hover {
    background: var(--btn-hover);
  }

  .result {
    margin-top: 20px;
    padding: 15px;
    border-radius: 10px;
    background: var(--bg-secondary);
    box-shadow: 0 0 5px var(--shadow);
    word-break: break-word;
    overflow-wrap: break-word;
  }

  .result p {
    margin: 8px 0;
    word-break: break-word;
  }

  .ok {
    color: #10b981;
    font-weight: bold;
  }

  .err {
    color: #ef4444;
    font-weight: bold;
  }

  .muted {
    color: var(--text-muted);
    font-size: 13px;
  }
</style>
</head>
<body>
  <button class="theme-toggle" id="themeBtn">üåô Gece</button>

  <h2>Portfolio Analyzer USD/TRY -farukguler.com</h2>

  <label>Varlƒ±k <span class="muted">(opsiyonel)</span></label>
  <input id="coin" placeholder="BTC, ETH, XMR..." />

  <label>Alƒ±≈ü Fiyatƒ± (USD)</label>
  <input id="buyPrice" type="number" step="0.01" placeholder="√∂r: 10.30" />

  <label>G√ºncel Fiyat (USD)</label>
  <input id="currentPrice" type="number" step="0.01" placeholder="√∂r: 1100" />

  <label>Alƒ±≈ü Dolar Kuru (USD/TRY)</label>
  <input id="buyRate" type="number" step="0.0001" placeholder="√∂r: 8" />

  <label>G√ºncel Dolar Kuru (USD/TRY)</label>
  <input id="currentRate" type="number" step="0.0001" placeholder="√∂r: 43" />

  <label>Adet (Miktar)</label>
  <input id="amount" type="number" step="0.0001" placeholder="√∂r: 1" />

  <button id="calcBtn">Hesapla</button>

  <div class="result" id="result" aria-live="polite"></div>

  <script>
  // Gece Modu Y√∂netimi
  const themeBtn = document.getElementById('themeBtn');
  const htmlElement = document.documentElement;
  const body = document.body;

  // Kaydedilmi≈ü tema tercihini y√ºkle
  const savedTheme = localStorage.getItem('theme') || 'light';
  if (savedTheme === 'dark') {
    body.classList.add('dark-mode');
    themeBtn.textContent = '‚òÄÔ∏è G√ºnd√ºz';
  }

  // Tema deƒüi≈ütir
  themeBtn.addEventListener('click', () => {
    body.classList.toggle('dark-mode');
    const isDark = body.classList.contains('dark-mode');
    themeBtn.textContent = isDark ? '‚òÄÔ∏è G√ºnd√ºz' : 'üåô Gece';
    localStorage.setItem('theme', isDark ? 'dark' : 'light');
  });

  function fmt(n, dec = 2) {
    if (isNaN(n)) return "0,00";
    return Number(n).toLocaleString('tr-TR', {
      minimumFractionDigits: dec,
      maximumFractionDigits: dec
    });
  }

  function showError(msg) {
    document.getElementById('result').innerHTML = `<div class="err">${msg}</div>`;
  }

  function calculate() {
    const buyPrice = parseFloat(document.getElementById('buyPrice').value);
    const currentPrice = parseFloat(document.getElementById('currentPrice').value);
    const buyRate = parseFloat(document.getElementById('buyRate').value);
    const currentRate = parseFloat(document.getElementById('currentRate').value);
    const amount = parseFloat(document.getElementById('amount').value);

    if ([buyPrice, currentPrice, buyRate, currentRate, amount].some(v => isNaN(v))) {
      showError("L√ºtfen t√ºm alanlara ge√ßerli sayƒ±sal deƒüer girin.");
      return;
    }
    if (buyPrice <= 0 || currentPrice <= 0 || buyRate <= 0 || currentRate <= 0 || amount <= 0) {
      showError("T√ºm deƒüerler 0'dan b√ºy√ºk olmalƒ±dƒ±r.");
      return;
    }

    const investUsd = buyPrice * amount;
    const investTry = investUsd * buyRate;
    const currentUsd = currentPrice * amount;
    const currentTry = currentUsd * currentRate;
    const profitUsd = currentUsd - investUsd;
    const profitTry = currentTry - investTry;
    const roiUsd = (profitUsd / investUsd) * 100;
    const roiTry = (profitTry / investTry) * 100;
    const xUsd = currentUsd / investUsd;
    const xTry = currentTry / investTry;
    const coin = (document.getElementById("coin").value || "").toUpperCase();
    const clsUsd = profitUsd >= 0 ? "ok" : "err";
    const clsTry = profitTry >= 0 ? "ok" : "err";

    document.getElementById("result").innerHTML = `
      ${coin ? `<p><b>Coin:</b> ${coin}</p>` : ""}
      <p><b>Yatƒ±rƒ±m (USD):</b> $${fmt(investUsd)}</p>
      <p><b>Yatƒ±rƒ±m (TRY):</b> ‚Ç∫${fmt(investTry)}</p>
      <p><b>G√ºncel Deƒüer (USD):</b> $${fmt(currentUsd)}</p>
      <p><b>G√ºncel Deƒüer (TRY):</b> ‚Ç∫${fmt(currentTry)}</p>
      <p class="${clsUsd}"><b>K√¢r / Zarar (USD):</b> ${profitUsd >= 0 ? '+' : ''}${fmt(profitUsd)} (${fmt(roiUsd)}%) ‚Üí ${fmt(xUsd, 3)}x</p>
      <p class="${clsTry}"><b>K√¢r / Zarar (TRY):</b> ${profitTry >= 0 ? '+' : ''}‚Ç∫${fmt(profitTry)} (${fmt(roiTry)}%) ‚Üí ${fmt(xTry, 3)}x</p>
    `;
  }

  document.getElementById("calcBtn").addEventListener("click", calculate);

  // Enter tu≈üu desteƒüi
  document.querySelectorAll('input').forEach(input => {
    input.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') calculate();
    });
  });
  </script>
</body>
</html>